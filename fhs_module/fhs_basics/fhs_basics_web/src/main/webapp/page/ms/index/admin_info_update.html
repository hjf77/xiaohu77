
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <%
    include("/page/tags/form_include.html"){}
    include("/page/tags/js_css_include.html"){}
    %>
</head>
<body class="skin-1">


	<!--修改个人信息-->
	<div id="updateUserInfoDiv">
        <div class="fitem">
            <#HideFormTag id='userId' name='userId'/>
            <#InputFormTag  name='userName' title='用户名' dataType='s2-10' required='true' />
            <#InputFormTag  name='userLoginName' title='登录名' dataType='/^[a-zA-Z0-9_]{1,}$/' required='true' /></div>
        <div class="fitem">
            <#InputFormTag  name='mobile' title='手机号' dataType='*,m' required='true' />
            <#InputFormTag  name='sex' title='性别'/>
        </div>
        <div class="fitem">
            <#InputFormTag  name='email' title='邮箱' dataType='e|empty' />
        </div>
        <div class="fitem">
            <#InputFormTag  name='organizationId' title='所属机构' required='true' />
        </div>
	</div>
	<div id="dlg-buttons">
		<center>
			 <a href="javascript:void(0)"
				class="easyui-linkbutton btn btn-can l-btn l-btn-small" onclick="top.closeDialog();">关闭</a>
		</center>
	</div>

<script type="text/javascript">
    var isInitProvinceId = false;
	$(document).ready(function() {
        renderView("updateUserInfoDiv");
        getOwnUserInfo();
	})

    function getOwnUserInfo() {
        $.ajax({
            type: 'get',
            url: "${basePath}ms/sysUser/getOwnUserInfo",
            dataType: 'json',
            async:false,
            success: function(res){
                $("#userId").val(res.userId);
                $("input[name='userName']").val(res.userName);
                $("input[name='userLoginName']").val(res.userLoginName);
                $("input[name='mobile']").val(res.mobile)
                $("input[name='sex']").val(res.transMap.sexName);
                $("input[name='email']").val(res.email);
                $("input[name='organizationId']").val(res.transMap.orgName);
            }
        });
    }
</script>

</body>
</html>
